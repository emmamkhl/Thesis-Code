{\rtf1\ansi\ansicpg1252\cocoartf2761
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 #!/bin/bash\
# File: week3_repeat_detection.sh\
\
echo \'93week 3: de \'93novo repeat detection\
\
##### create output directories\
mkdir -p repeatmodeler_output\
mkdir -p repeatmasker_output\
mkdir -p repeat_libraries\
\
##### run repeatmodeler on all genomes\
for phylum in cnidaria crustacea mollusca; do\
    for genome in genomes/$phylum/*.fna; do\
        species=$(basename "$genome" .fna)\
        echo "running repeatmodeler on $species"\
        \
        # build database\
        BuildDatabase -name repeatmodeler_output/$\{species\}_db -engine ncbi $genome\
        \
        # run repeatmodeler\
        RepeatModeler -database repeatmodeler_output/$\{species\}_db -engine ncbi -pa 8 -LTRStruct > repeatmodeler_output/$\{species\}_repeatmodeler.log 2>&1\
        \
        # copy library to libraries directory\
        cp repeatmodeler_output/$\{species\}_db-families.fa repeat_libraries/$\{species\}_custom_library.fa\
        \
        # run repeatmasker with custom library\
        RepeatMasker -lib repeat_libraries/$\{species\}_custom_library.fa -dir repeatmasker_output -gff -pa 8 $genome\
        \
        echo "$species repeat detection complete"\
    done\
done\
\
##### generate summary statistics\
echo "generating repeat detection summary..."\
cat > repeat_detection_summary.txt << 'EOF'\
WEEK 3: REPEAT DETECTION SUMMARY\
================================\
\
Species processed:\
- Hydra vulgaris\
- Clytia hemisphaerica  \
- Nematostella vectensis\
- Daphnia pulex\
- Hyalella azteca\
- Lepeophtheirus salmonis\
- Biomphalaria glabrata\
- Crassostrea ariakensis\
- Crassostrea gigas\
\
Output files:\
- repeatmodeler_output/: RepeatModeler databases and logs\
- repeat_libraries/: Custom repeat libraries for each species\
- repeatmasker_output/: RepeatMasker annotation files (.out, .gff)\
\
EOF\
\
echo "week 3 repeat detection complete"}
